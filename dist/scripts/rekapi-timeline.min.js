!function(){define("rekapi-timeline.component.container/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text",{load:function(a){throw new Error("Dynamic load not allowed: "+a)}}),define("text!rekapi-timeline.component.container/template.mustache",[],function(){return'<div class="$controlBar"></div>\n<div class="$timeline"></div>\n<div class="$details"></div>\n'}),define("rekapi-timeline.component.container/view",["lateralus","text!./template.mustache"],function(a,b){"use strict";var c=a.Component.View,d=c.prototype,e=c.extend({template:b,initialize:function(){d.initialize.apply(this,arguments)}});return e}),define("rekapi-timeline.component.control-bar/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.control-bar/template.mustache",[],function(){return'<i class="glyphicon glyphicon-play play"></i>\n<i class="glyphicon glyphicon-pause pause"></i>\n<i class="glyphicon glyphicon-stop stop"></i>\n'}),define("rekapi-timeline.component.control-bar/view",["lateralus","text!./template.mustache"],function(a,b){"use strict";var c=a.Component.View,d=c.prototype,e=c.extend({template:b,events:{"click .play":function(){this.play()},"click .pause":function(){this.pause()},"click .stop":function(){this.lateralus.rekapi.stop().update(0)}},initialize:function(){d.initialize.apply(this,arguments),this.lateralus.rekapi.isPlaying()&&this.$el.addClass("playing"),this.lateralus.rekapi.on("playStateChange",this.onRekapiPlayStateChanged.bind(this))},onRekapiPlayStateChanged:function(){this.lateralus.rekapi.isPlaying()?this.$el.addClass("playing"):this.$el.removeClass("playing")},play:function(){this.lateralus.rekapi.playFromCurrent()},pause:function(){this.lateralus.rekapi.pause()}});return e}),define("rekapi-timeline.component.control-bar/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"control-bar",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.control-bar",["rekapi-timeline.component.control-bar/main"],function(a){return a}),define("rekapi-timeline.component.timeline/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.timeline/template.mustache",[],function(){return'<div class="$timelineWrapper timeline-wrapper">\n  <div class="$scrubber"></div>\n  <div class="$animationTracks"></div>\n</div>\n'}),define("rekapi-timeline/constant",[],function(){"use strict";var a={PIXELS_PER_SECOND:300,NEW_KEYFRAME_PROPERTY_BUFFER_MS:500,DEFAULT_TIMELINE_SCALE:1};return a}),define("rekapi-timeline.component.timeline/view",["lateralus","text!./template.mustache","rekapi-timeline/constant"],function(a,b,c){"use strict";var d=a.Component.View,e=d.prototype,f=d.extend({template:b,lateralusEvents:{timelineModified:function(){this.$timelineWrapper.css("width",this.getPixelWidthForTracks())}},provide:{timelineWrapperHeight:function(){return this.$timelineWrapper.height()}},initialize:function(){e.initialize.apply(this,arguments)},getPixelWidthForTracks:function(){var a=this.lateralus.rekapi.getAnimationLength(),b=a/1e3;return c.PIXELS_PER_SECOND*b+this.$el.width()}});return f}),define("rekapi-timeline.component.scrubber/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.scrubber/template.mustache",[],function(){return'<div class="$scrubberWrapper scrubber-wrapper">\n  <div class="$scrubberHandle scrubber-handle">\n    <i class="glyphicon glyphicon-chevron-down scrubber-icon">&nbsp;</i>\n    <figure class="$scrubberGuide scrubber-guide"></figure>\n  </div>\n</div>\n'}),define("rekapi-timeline.component.scrubber/view",["lateralus","text!./template.mustache","rekapi-timeline/constant"],function(a,b,c){"use strict";var d=a.Component.View,e=d.prototype,f=d.extend({template:b,lateralusEvents:{"change:timelineScale":function(){this.render()}},initialize:function(){e.initialize.apply(this,arguments),this.listenTo(this.lateralus.rekapi,"addKeyframePropertyTrack",this.resizeScrubberGuide.bind(this)),this.syncContainerToTimelineLength(),this.$scrubberHandle.dragon({within:this.$scrubberWrapper,drag:this.onScrubberDrag.bind(this)}),this.lateralus.rekapi.on("afterUpdate",this.onRekapiAfterUpdate.bind(this)),this.lateralus.rekapi.on("timelineModified",this.onRekapiTimelineModified.bind(this))},deferredInitialize:function(){this.resizeScrubberGuide()},render:function(){this.syncContainerToTimelineLength(),this.syncHandleToTimelineLength()},onScrubberDrag:function(){var a=this.lateralus.getTimelineMillisecondForHandle(this.$scrubberHandle)/this.lateralus.timelineScale;this.lateralus.rekapi.update(a)},onRekapiAfterUpdate:function(){this.render()},onRekapiTimelineModified:function(){this.render()},syncContainerToTimelineLength:function(){var a=this.lateralus.getAnimationLength()*(c.PIXELS_PER_SECOND/1e3)*this.lateralus.timelineScale;this.$scrubberWrapper.width(a+this.$scrubberHandle.width())},syncHandleToTimelineLength:function(){var a=this.lateralus.rekapi.getLastPositionUpdated()*this.lateralus.rekapi.getAnimationLength(),b=a*(c.PIXELS_PER_SECOND/1e3)*this.lateralus.timelineScale;this.$scrubberHandle.css("left",b)},resizeScrubberGuide:function(){var a=this.collectOne("timelineWrapperHeight"),b=parseInt(this.$scrubberWrapper.css("borderBottomWidth"),10);this.$scrubberGuide.css("height",a-this.$el.height()+b)}});return f}),define("rekapi-timeline.component.scrubber/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"scrubber",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.scrubber",["rekapi-timeline.component.scrubber/main"],function(a){return a}),define("rekapi-timeline.component.animation-tracks/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.animation-tracks/template.mustache",[],function(){return""}),define("rekapi-timeline.component.actor-tracks/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.actor-tracks/template.mustache",[],function(){return""}),define("rekapi-timeline.component.keyframe-property-track/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({defaults:{trackName:""},initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.keyframe-property-track/template.mustache",[],function(){return""}),define("rekapi-timeline.component.keyframe-property/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.keyframe-property/template.mustache",[],function(){return'<button class="$handle keyframe-property" data-name="{{keyframeProperty.name}}" data-value="{{keyframeProperty.value}}" data-millisecond="{{keyframeProperty.millisecond}}">&nbsp;</button>\n'}),define("rekapi-timeline.component.keyframe-property/view",["lateralus","text!./template.mustache","rekapi-timeline/constant"],function(a,b,c){"use strict";var d=a.Component.View,e=d.prototype,f=d.extend({template:b,events:{"focus button":function(a){a.targetView=this,this.emit("userFocusedKeyframeProperty",a)}},modelEvents:{change:function(){this.render()},destroy:function(){this.dispose()}},lateralusEvents:{"change:timelineScale":function(){this.render()}},initialize:function(){e.initialize.apply(this,arguments)},deferredInitialize:function(){this.$el.dragon({within:this.keyframePropertyTrackComponentView.$el,drag:this.onDrag.bind(this),dragEnd:this.onDragEnd.bind(this)}),this.lateralus.model.get("hasBooted")&&this.$handle.focus()},render:function(){var a=this.$el.data("dragon");if(!a||!a.isDragging){var b=c.PIXELS_PER_SECOND*this.model.get("millisecond")/1e3*this.lateralus.timelineScale;this.$el.css({left:b});var d=this.model;this.$handle.attr("data-millisecond",d.get("millisecond")).attr("data-value",d.get("value"))}},onDrag:function(){this.updateKeyframeProperty()},onDragEnd:function(){this.$handle.focus()},updateKeyframeProperty:function(){var a=this.lateralus.getTimelineMillisecondForHandle(this.$el)/this.lateralus.timelineScale;this.model.set("millisecond",Math.round(a)),this.lateralus.update()}});return f}),define("rekapi-timeline.component.keyframe-property/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"keyframe-property",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.keyframe-property",["rekapi-timeline.component.keyframe-property/main"],function(a){return a}),define("rekapi-timeline.component.keyframe-property-track/view",["lateralus","text!./template.mustache","rekapi-timeline.component.keyframe-property"],function(a,b,c){"use strict";var d=a.Component.View,e=d.prototype,f=d.extend({template:b,lateralusEvents:{addKeyframeProperty:function(a){a.get("name")===this.model.get("trackName")&&this.addKeyframePropertyComponent(a)}},initialize:function(){e.initialize.apply(this,arguments),this.keyframePropertyComponents=[];var a=this.model.get("trackName");this.$el.attr("data-track-name",a),this.actorModel.keyframePropertyCollection.where({name:a}).forEach(this.addKeyframePropertyComponent,this)},addKeyframePropertyComponent:function(a){var b=document.createElement("div");this.$el.append(b);var d=this.addComponent(c,{el:b,keyframePropertyTrackComponentView:this,model:a});this.keyframePropertyComponents.push(d),d.view.render()}});return f}),define("rekapi-timeline.component.keyframe-property-track/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"keyframe-property-track",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.keyframe-property-track",["rekapi-timeline.component.keyframe-property-track/main"],function(a){return a}),define("rekapi-timeline.component.actor-tracks/view",["lateralus","text!./template.mustache","rekapi-timeline.component.keyframe-property-track"],function(a,b,c){"use strict";var d=a.Component.View,e=d.prototype,f=d.extend({template:b,modelEvents:{addKeyframePropertyTrack:function(a){this.addKeyframePropertyTrackComponent(a)}},initialize:function(){e.initialize.apply(this,arguments),this.keyframePropertyTrackComponents=[],this.model.getTrackNames().forEach(this.addKeyframePropertyTrackComponent,this)},addKeyframePropertyTrackComponent:function(a){var b=this.addComponent(c,{actorModel:this.model},{modelAttributes:{trackName:a}});this.keyframePropertyTrackComponents.push(b),this.$el.append(b.view.$el)}});return f}),define("rekapi-timeline.component.actor-tracks/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"actor-tracks",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.actor-tracks",["rekapi-timeline.component.actor-tracks/main"],function(a){return a}),define("rekapi-timeline.component.animation-tracks/view",["underscore","lateralus","text!./template.mustache","rekapi-timeline.component.actor-tracks"],function(a,b,c,d){"use strict";var e=b.Component.View,f=e.prototype,g=e.extend({template:c,initialize:function(){f.initialize.apply(this,arguments),this.actorTracksComponents=[],this.listenTo(this.lateralus.actorCollection,"add",this.onActorCollectionAdd.bind(this)),this.createActorComponents()},onActorCollectionAdd:function(a){this.createActorComponent(a)},createActorComponents:function(){var b=this.lateralus.actorCollection;a.each(this.lateralus.getAllActors(),b.addActorToCollection,b)},createActorComponent:function(a){var b=this.addComponent(d,{model:a});this.actorTracksComponents.push(b),this.$el.append(b.view.$el)}});return g}),define("rekapi-timeline.component.animation-tracks/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"animation-tracks",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.animation-tracks",["rekapi-timeline.component.animation-tracks/main"],function(a){return a}),define("rekapi-timeline.component.timeline/main",["lateralus","./model","./view","text!./template.mustache","rekapi-timeline.component.scrubber","rekapi-timeline.component.animation-tracks"],function(a,b,c,d,e,f){"use strict";var g=a.Component,h=g.extend({name:"timeline",Model:b,View:c,template:d,initialize:function(){this.scrubberComponent=this.addComponent(e,{el:this.view.$scrubber[0]}),this.animationTracksComponent=this.addComponent(f,{el:this.view.$animationTracks[0]})}});return h}),define("rekapi-timeline.component.timeline",["rekapi-timeline.component.timeline/main"],function(a){return a}),define("rekapi-timeline.component.details/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.details/template.mustache",[],function(){return'<div class="$scrubberDetail"></div>\n<div class="$keyframePropertyDetail fill"></div>\n'}),define("rekapi-timeline.component.details/view",["lateralus","text!./template.mustache"],function(a,b){"use strict";var c=a.Component.View,d=c.prototype,e=c.extend({template:b,initialize:function(){d.initialize.apply(this,arguments)}});return e}),define("rekapi-timeline.component.scrubber-detail/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.scrubber-detail/template.mustache",[],function(){return'<label class="label-input-pair row">\n  <p>Zoom:</p>\n  <input type="number" class="$scrubberScale scrubber-scale" value="{{initialZoom}}" min="0" step="10">\n</label>\n'}),define("rekapi-timeline.component.scrubber-detail/view",["underscore","lateralus","text!./template.mustache"],function(a,b,c){"use strict";var d=b.Component.View,e=d.prototype,f=d.extend({template:c,events:{"change .scrubber-scale":function(){this.lateralus.setTimelineScale(this.$scrubberScale.val()/100)}},initialize:function(){e.initialize.apply(this,arguments)},getTemplateRenderData:function(){var b=e.getTemplateRenderData.apply(this,arguments);return a.extend(b,{initialZoom:100*this.lateralus.timelineScale}),b}});return f}),define("rekapi-timeline.component.scrubber-detail/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"scrubber-detail",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.scrubber-detail",["rekapi-timeline.component.scrubber-detail/main"],function(a){return a}),define("rekapi-timeline.component.keyframe-property-detail/model",["lateralus"],function(a){"use strict";var b=a.Component.Model,c=b.prototype,d=b.extend({initialize:function(){c.initialize.apply(this,arguments)}});return d}),define("text!rekapi-timeline.component.keyframe-property-detail/template.mustache",[],function(){return'<h1 class="$propertyName keyframe-property-name">Detail</h1>\n<label class="label-input-pair row keyframe-property-millisecond">\n  <p>Millisecond:</p>\n  <input class="$propertyMillisecond property-millisecond" type="number" value="" name="millisecond" step="10">\n</label>\n<label class="label-input-pair row keyframe-property-value">\n  <p>Value:</p>\n  <input class="$propertyValue property-value" type="text" value="" name="value">\n</label>\n<label class="label-input-pair row select-container keyframe-property-easing">\n  <p>Easing:</p>\n  <select class="$propertyEasing" name="easing"></select>\n</label>\n<button class="field-button add">Add a new keyframe</button>\n<button class="field-button delete">Remove this keyframe</button>\n'}),define("rekapi-timeline.component.keyframe-property-detail/view",["underscore","lateralus","shifty","text!./template.mustache","rekapi-timeline/constant"],function(a,b,c,d,e){"use strict";var f=b.Component.View,g=f.prototype,h=f.extend({template:d,lateralusEvents:{userFocusedKeyframeProperty:function(b){this.activeKeyframePropertyModel&&this.stopListening(this.activeKeyframePropertyModel),this.activeKeyframePropertyModel=b.targetView.model,this.listenTo(this.activeKeyframePropertyModel,"change",this.render.bind(this));var d=[];a.each(c.prototype.formula,function(a,b){var c=document.createElement("option");c.innerHTML=b,d.push(c)},this),this.$propertyEasing.children().remove(),this.$propertyEasing.append(d).val(this.activeKeyframePropertyModel.get("easing")),this.render()}},events:{"change input":"onChangeInput","change select":"onChangeInput","click .add":function(){this.addNewKeyframeProperty()},"click .delete":function(){this.deleteCurrentKeyframeProperty()}},initialize:function(){g.initialize.apply(this,arguments)},render:function(){this.$propertyName.text(this.activeKeyframePropertyModel.get("name")),this.$propertyMillisecond.val(this.activeKeyframePropertyModel.get("millisecond")),this.$propertyValue.val(this.activeKeyframePropertyModel.get("value"))},onChangeInput:function(a){var b=$(a.target),c=b.val(),d=c==+c?+c:c;this.activeKeyframePropertyModel.set(b.attr("name"),d),this.lateralus.update()},addNewKeyframeProperty:function(){if(this.activeKeyframePropertyModel){var a=this.activeKeyframePropertyModel,b=a.getActorModel(),c=a.get("millisecond")+e.NEW_KEYFRAME_PROPERTY_BUFFER_MS,d={};d[a.get("name")]=a.get("value"),b.keyframe(c,d,a.get("easing"))}},deleteCurrentKeyframeProperty:function(){if(this.activeKeyframePropertyModel){var a=this.activeKeyframePropertyModel;a.getActorModel().removeKeyframeProperty(a.get("name"),a.get("millisecond"))}}});return h}),define("rekapi-timeline.component.keyframe-property-detail/main",["lateralus","./model","./view","text!./template.mustache"],function(a,b,c,d){"use strict";var e=a.Component,f=e.extend({name:"keyframe-property-detail",Model:b,View:c,template:d});return f}),define("rekapi-timeline.component.keyframe-property-detail",["rekapi-timeline.component.keyframe-property-detail/main"],function(a){return a}),define("rekapi-timeline.component.details/main",["lateralus","./model","./view","text!./template.mustache","rekapi-timeline.component.scrubber-detail","rekapi-timeline.component.keyframe-property-detail"],function(a,b,c,d,e,f){"use strict";var g=a.Component,h=g.extend({name:"details",Model:b,View:c,template:d,initialize:function(){this.scrubberDetailComponent=this.addComponent(e,{el:this.view.$scrubberDetail[0]}),this.keyframePropertyDetailComponent=this.addComponent(f,{el:this.view.$keyframePropertyDetail[0]})}});return h}),define("rekapi-timeline.component.details",["rekapi-timeline.component.details/main"],function(a){return a}),define("rekapi-timeline.component.container/main",["lateralus","./model","./view","text!./template.mustache","rekapi-timeline.component.control-bar","rekapi-timeline.component.timeline","rekapi-timeline.component.details"],function(a,b,c,d,e,f,g){"use strict";var h=a.Component,i=h.extend({name:"container",Model:b,View:c,template:d,initialize:function(){this.controlBar=this.addComponent(e,{el:this.view.$controlBar[0]}),this.timelineComponent=this.addComponent(f,{el:this.view.$timeline[0]}),this.detailsComponent=this.addComponent(g,{el:this.view.$details[0]})}});return i}),define("rekapi-timeline.component.container",["rekapi-timeline.component.container/main"],function(a){return a}),define("rekapi-timeline/utils",["underscore"],function(a){"use strict";return{proxy:function(b,c,d){d=d||{};var e=d.blacklistedMethodNames||[],f=d.subject,g=a.difference(Object.keys(b.prototype),e),h=b.prototype,i=c.prototype;g.forEach(function(a){var b=h[a];i[a]=function(){var a=f?f.call(this):this;return b.apply(a,arguments)}},this)}}}),define("rekapi-timeline/model",["underscore","lateralus"],function(a,b){"use strict";var c=b.Model.extend({defaults:{hasRendered:!1,hasBooted:!1}});return c}),define("rekapi-timeline/models/keyframe-property",["underscore","backbone","lateralus","rekapi","rekapi-timeline/utils"],function(a,b,c,d,e){"use strict";var f=c.Component.Model,g=f.extend({defaults:{keyframeProperty:d.KeyframeProperty},initialize:function(){this.attributes=this.attributes.keyframeProperty,this.lateralus.rekapi.on("removeKeyframeProperty",this.onRekapiRemoveKeyframeProperty.bind(this)),this.id=this.attributes.id},onRekapiRemoveKeyframeProperty:function(a,b){b===this.attributes&&this.destroy()},set:function(a,c){if(b.Model.prototype.set.apply(this,arguments),a in this.attributes){var d={};d[a]=c,this.attributes.actor.modifyKeyframeProperty(this.attributes.name,this.attributes.millisecond,d)}},getActor:function(){return this.attributes.actor},getActorModel:function(){return this.collection.actorModel},destroy:function(){this.trigger("destroy")}});return e.proxy(d.KeyframeProperty,g),g}),define("rekapi-timeline/collections/keyframe-property",["backbone","lateralus","rekapi-timeline/models/keyframe-property"],function(a,b,c){"use strict";var d=b.Component.Collection,e=d.extend({model:c,initialize:function(a,b){this.actorModel=b.actorModel,this.lateralus.rekapi.on("addKeyframeProperty",this.onAddKeyframeProperty.bind(this)),this.lateralus.rekapi.on("removeKeyframeProperty",this.onRemoveKeyframeProperty.bind(this))},onAddKeyframeProperty:function(a,b){b.actor===this.actorModel.getActor()&&this.addKeyframePropertyToCollection(b)},onRemoveKeyframeProperty:function(a,b){b.actor===this.actorModel.getActor()&&this.removeKeyframePropertyFromCollection(b)},addKeyframePropertyToCollection:function(a){var b=this.initModel(c,{keyframeProperty:a});return this.add(b)},removeKeyframePropertyFromCollection:function(a){this.remove(a.id)}});return e}),define("rekapi-timeline/models/actor",["lateralus","rekapi","rekapi-timeline/collections/keyframe-property","rekapi-timeline/utils"],function(a,b,c,d){"use strict";var e=a.Component.Model,f=e.extend({defaults:{actor:b.Actor},initialize:function(){this.attributes=this.attributes.actor,this.getTrackNames().forEach(this.addKeyframePropertyTrack,this),this.lateralus.rekapi.on("addKeyframePropertyTrack",this.onRekapiAddKeyframePropertyTrack.bind(this)),this.keyframePropertyCollection=this.initCollection(c,null,{actorModel:this}),this.listenTo(this.keyframePropertyCollection,"add",this.onAddKeyframeProperty.bind(this)),this.getTrackNames().forEach(function(a){this.getPropertiesInTrack(a).forEach(this.keyframePropertyCollection.addKeyframePropertyToCollection,this.keyframePropertyCollection)},this)},onRekapiAddKeyframePropertyTrack:function(a,b){b.actor===this.attributes&&this.addKeyframePropertyTrack(b.name)},onAddKeyframeProperty:function(a){this.emit("addKeyframeProperty",a)},addKeyframePropertyTrack:function(a){this.emit("addKeyframePropertyTrack",a)},getActor:function(){return this.attributes}});return d.proxy(b.Actor,f,{subject:function(){return this.attributes}}),f}),define("rekapi-timeline/collections/actor",["backbone","lateralus","rekapi-timeline/models/actor"],function(a,b,c){"use strict";var d=b.Component.Collection,e=d.extend({model:c,initialize:function(){this.lateralus.rekapi.on("addActor",this.onRekapiAddActor.bind(this))},onRekapiAddActor:function(a,b){this.addActorToCollection(b)},addActorToCollection:function(a){var b=this.initModel(c,{actor:a});return this.add(b)}});return e}),define("rekapi-timeline/rekapi-timeline",["underscore","lateralus","rekapi","rekapi-timeline.component.container","rekapi-timeline/utils","rekapi-timeline/model","rekapi-timeline/constant","rekapi-timeline/collections/actor","jquery-dragon"],function(a,b,c,d,e,f,g,h){"use strict";var i=b.beget(function(c,e){b.apply(this,arguments),this.rekapi=e,this.timelineScale=g.DEFAULT_TIMELINE_SCALE,this.actorCollection=this.initCollection(h),this.containerComponent=this.addComponent(d,{el:c}),this.model.set("hasRendered",!0),this.emit("initialDOMRender"),this.rekapi.on("timelineModified",this.emit.bind(this,"timelineModified")),this.emit("timelineModified"),a.defer(this.deferredInitialize.bind(this))},{Model:f});return i.prototype.deferredInitialize=function(){this.model.set("hasBooted",!0)},i.prototype.getTimelineMillisecondForHandle=function(a){var b=parseInt(a.css("left"),10)-parseInt(a.parent().css("border-left-width"),10),c=b/g.PIXELS_PER_SECOND*1e3;return c},i.prototype.setTimelineScale=function(a){this.timelineScale=a,this.trigger("change:timelineScale",a)},c.prototype.createTimeline=function(a){return new i(a,this)},e.proxy(c,i,{blacklistedMethodNames:["on","off"],subject:function(){return this.rekapi}}),i}),define("rekapi-timeline",["rekapi-timeline/rekapi-timeline"],function(a){return a})}();